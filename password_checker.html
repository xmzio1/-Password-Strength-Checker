<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Password Checker</title>
<style>
    body{font-family: system-ui, "Segoe UI", Tahoma, sans-serif;direction:ltr;padding:20px}
    .meter{height:18px;border-radius:9px;background:#eee;overflow:hidden;margin-top:8px}
    .meter > div{height:100%;width:0;transition:width .2s}
    .info{margin-top:10px}
    ul{margin:8px 0 0 0;padding-left:18px}
    .weak{background:#ff6b6b}
    .fair{background:#ffb86b}
    .good{background:#7bd389}
    .excellent{background:#4caf50}
    .badge{display:inline-block;padding:4px 8px;border-radius:6px;background:#f0f0f0;margin-left:8px}
</style>
</head>
<body>
<h2>Password Strength Checker — Interactive</h2>
<input id="pw" type="password" placeholder="Enter password" style="width:100%;padding:10px;font-size:16px" />
<div class="meter"><div id="bar"></div></div>
<div class="info">
    <span id="strengthText" class="badge">Strength: -</span>
    <span id="entropyText" class="badge">Entropy: -</span>
    <div id="issues"></div>
    <ul id="suggestions"></ul>
</div>

<script>
function charPoolSize(pw){
    let size = 0;
    if (/[a-z]/.test(pw)) size += 26;
    if (/[A-Z]/.test(pw)) size += 26;
    if (/[0-9]/.test(pw)) size += 10;
    if (/[^a-zA-Z0-9]/.test(pw)) size += 32;
    return size;
}
function entropyBits(pw){
    const pool = charPoolSize(pw);
    if (pool <= 0) return 0;
    return pw.length * (Math.log2(pool));
}
function keyboardScore(pw){
    const patterns = ['qwerty','asdf','zxcv','12345','password','qaz','wsx'];
    const low = pw.toLowerCase();
    for (let p of patterns) if (low.includes(p)) return 3;
    return 0;
}
function repeatedScore(pw){
    if (/(.)\1\1/.test(pw)) return 2;
    if (/(.{2,})\1/.test(pw)) return 2;
    return 0;
}
function analyze(pw){
    const ent = entropyBits(pw);
    const length = pw.length;
    const hasLower = /[a-z]/.test(pw);
    const hasUpper = /[A-Z]/.test(pw);
    const hasDigit = /[0-9]/.test(pw);
    const hasSymbol = /[^a-zA-Z0-9]/.test(pw);

    let score = 0;
    let issues = [];

    if (length >= 8) score++;
    else issues.push("Length less than 8 characters.");
    if (hasLower) score++; else issues.push("Add lowercase letters.");
    if (hasUpper) score++; else issues.push("Add uppercase letters.");
    if (hasDigit) score++; else issues.push("Add numbers.");
    if (hasSymbol) score++; else issues.push("Add symbols.");

    const rep = repeatedScore(pw);
    const key = keyboardScore(pw);
    score -= (rep + key);
    if (rep) issues.push("Repeated characters or patterns.");
    if (key) issues.push("Known keyboard pattern.");

    let strength = "Weak";
    if (ent >= 60 && score >= 3) strength = "Very Strong";
    else if (ent >= 45 && score >= 1) strength = "Strong";
    else if (ent >= 28) strength = "Medium";
    else strength = "Weak";

    let pct = Math.min(100, Math.max(5, Math.round((ent/80)*100)));
    return {ent: Math.round(ent*100)/100, strength, pct, issues};
}

const pwInput = document.getElementById('pw');
const bar = document.getElementById('bar');
const strengthText = document.getElementById('strengthText');
const entropyText = document.getElementById('entropyText');
const issuesDiv = document.getElementById('issues');
const suggestionsList = document.getElementById('suggestions');

pwInput.addEventListener('input', ()=>{
    const v = pwInput.value;
    const r = analyze(v);
    bar.style.width = r.pct + '%';
    bar.className = '';
    if (r.pct < 35) bar.classList.add('weak');
    else if (r.pct < 55) bar.classList.add('fair');
    else if (r.pct < 80) bar.classList.add('good');
    else bar.classList.add('excellent');

    strengthText.textContent = 'Strength: ' + r.strength;
    entropyText.textContent = 'Entropy: ' + r.ent + ' bits';

    issuesDiv.innerHTML = '';
    suggestionsList.innerHTML = '';

    if (r.issues.length){
        issuesDiv.innerHTML = '<strong>Issues:</strong>';
        for (let it of r.issues){
            let li = document.createElement('li');
            li.textContent = it;
            suggestionsList.appendChild(li);
        }
    } else {
        issuesDiv.innerHTML = '<strong>No major issues</strong>';
    }
    const suggestions = [
        "Make password length ≥ 12 characters.",
        "Use a passphrase like: 'Coffee-Morning-123!'",
        "Do not use the same password for all sites.",
        "Consider using a password manager."
    ];
    for (let s of suggestions){
        let li = document.createElement('li');
        li.textContent = s;
        suggestionsList.appendChild(li);
    }
});
</script>
</body>
</html>
